<div *ngIf="podcastTableData">
  <p *ngIf="filter?.interval === bindToIntervalHourly"><em>Hourly data is shown in your local timezone</em></p>

  <div class="table-navigation">
    <button (click)="toggleExpandedReport()" class="btn-link">
      <p *ngIf="!expanded">Show more &gt;&gt;</p>
      <p *ngIf="expanded">Show less &lt;&lt;</p>
    </button>

    <metrics-episode-page
    [currentPage]="filter?.page"
    [totalPages]="totalPages"
    (pageChange)="pageChange.emit($event)"></metrics-episode-page>
  </div>

  <div class="table-wrapper">
    <table class="sticky">
      <thead>
        <tr>
          <th>Episode</th>
          <th>Release Date</th>
          <th>Total for Period</th>
          <th>{{filter.interval.name}} Average</th>
          <th>All-Time Downloads</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <prx-checkbox small [checked]="podcastTableData.charted" [color]="podcastTableData.color"
              (change)="toggleChartPodcast($event)">{{podcastTableData.title}}</prx-checkbox>
          </td>
          <td>{{podcastTableData.releaseDate}}</td>
          <td>{{podcastTableData.totalForPeriod | largeNumber}}</td>
          <td>{{podcastTableData.avgPerIntervalForPeriod | largeNumber}}</td>
          <td>(all time downloads)</td>
        </tr>
        <tr *ngFor="let episode of episodeTableData">
          <td>
            <prx-checkbox small [checked]="episode.charted" [color]="episode.color"
              (change)="toggleChartEpisode(episode, $event)">{{episode.title}}</prx-checkbox>
          </td>
          <td>{{episode.releaseDate}}</td>
          <td>{{episode.totalForPeriod | largeNumber}}</td>
          <td>{{episode.avgPerIntervalForPeriod | largeNumber}}</td>
          <td>(all time downloads)</td>
        </tr>
      </tbody>
    </table>
    <div class="scroll-x-wrapper">
      <table class="scroll-x" *ngIf="expanded">
        <thead>
          <tr>
            <th *ngFor="let date of dateRange">{{date}}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td *ngFor="let download of podcastTableData.downloads">{{download.value | largeNumber}}</td>
          </tr>
          <tr *ngFor="let episode of episodeTableData">
            <td *ngFor="let download of episode.downloads">{{download.value | largeNumber}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
